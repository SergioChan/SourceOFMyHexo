title: iOS 静态库封装和使用方法
date: 2014-12-10 20:47:54
categories: iOS菜鸟心得
author: Sergio Chan
tags: [iOS静态库]
---

由于现在的任务是将之前已经进行了第一步demo的验证，我需要将demo里的需要的部分整理出来，封装成静态库，从而给其他开发者使用。iOS封装静态库在百度上已经有很多教程了，但是实际中我却遇到了这样的问题：

* 静态库里的代码需要引用到其他静态库，不是简单的控件封装。
* 之前的项目大部分引用的文件都只是加在了Library和Header search path中，并没有真正添加在项目中。

第一步，新建一个Framework&Library ->Cocoa Touch Static Library 的工程。
将我需要的代码文件添加进项目目录下。修改build setting，和之前完整的工程的配置基本一样即可。
对于引用到的其他静态库，确认它处于Link Binary With Libraries下。
再确认Library和Header search path指向了正确的头文件或库文件的路径。删除多余的库文件以保证最后的静态库体积最小。

第二步，选择真机环境编译，这里编译的target选的不一样，编译出来的静态库可运行环境就不一样。由于我需要编译的这个功能也只能运行在真机上，所以就直接在真机环境下编译即可。

第三步，编译之前注意选择Build Phase->Copy Files，将之后需要展示出来的头文件添加进去。注意Copy only when installing不要选中。

第四步可以编译了，跑出来的静态库如果没有报错就是可以使用的了。在使用这个静态库的时候也一定要注意所有的头文件和库文件，包括静态库需要指向的头文件，都要在新工程的build setting里设置清楚。实验证明= =如果一个静态库里会用到其他静态库的话，是可以把静态库压的更小的。。。并且引用还是比较好解决的，只要保证各种路径都指向正确。
